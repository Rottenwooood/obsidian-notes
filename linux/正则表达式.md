## 🧠 一、基本概念

**正则表达式**是一种用来匹配字符串的模式语言，常用于：
- 查找文本中特定格式的内容
- 替换某些内容
- 验证输入是否符合格式（如邮箱、电话）
---
## 🔤 二、常用元字符（Meta Characters）

| 元字符 | 含义 |
|--------|------|
| `.`    | 匹配任意一个字符（除了换行符） |
| `\d`   | 匹配任意数字（0-9） |
| `\D`   | 匹配非数字 |
| `\w`   | 匹配字母、数字、下划线（a-z, A-Z, 0-9, _） |
| `\W`   | 匹配非单词字符 |
| `\s`   | 匹配空白字符（空格、制表符、换行等） |
| `\S`   | 匹配非空白字符 |
| `^`    | 行首锚点 |
| `$`    | 行尾锚点 |
| `[]`   | 匹配括号中的任意一个字符 |
| `[^]`  | 匹配不在括号中的任意一个字符 |
| `*`    | 前面的字符出现 0 次或多次 |
| `+`    | 前面的字符出现 1 次或多次 |
| `?`    | 前面的字符出现 0 次或 1 次 |
| `{n}`  | 前面的字符恰好出现 n 次 |
| `{n,}` | 前面的字符至少出现 n 次 |
| `{n,m}`| 前面的字符出现 n 到 m 次之间 |
| `()`   | 分组 |
| `\b`   | 单词边界 |
| `\B`   | 非单词边界 |
| `|`    | 或 |

---
## 📚 三、Linux 中常见使用场景和命令

### 1. `grep`：查找匹配的行
```bash
grep 'pattern' filename.txt
```
#### 示例：
```bash
# 查找包含 "hello" 的行
grep 'hello' file.txt

# 忽略大小写
grep -i 'hello' file.txt

# 显示匹配行的行号
grep -n 'hello' file.txt

# 只显示匹配次数
grep -c 'hello' file.txt

# 使用扩展正则
grep -E 'hello|world' file.txt
```
---
### 2. `sed`：流编辑器，用于替换、删除、插入等
```bash
# 将所有 "apple" 替换为 "orange"
sed 's/apple/orange/g' file.txt
```
支持正则：
```bash
# 删除所有以 # 开头的注释行
sed '/^#/d' file.txt
```
---
### 3. `awk`：文本分析工具
```bash
# 打印第1列等于 "root" 的行
awk '$1 == "root" {print}' /etc/passwd
```
也可以配合正则使用：
```bash
# 匹配第一列以 r 开头的行
awk '$1 ~ /^r/ {print}' /etc/passwd
```
---
## 🎯 四、实战示例讲解
### 示例 1：匹配邮箱地址
```regex
\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}\b
```
解释：
- `\b`：单词边界
- `[A-Za-z0-9._%+-]+`：用户名部分，多个字符
- `@`：必须有 @ 符号
- `[A-Za-z0-9.-]+`：域名部分
- `\.`：点号（转义）
- `[A-Za-z]{2,}`：顶级域名，至少两个字母
### 示例 2：匹配 IP 地址（IPv4）
```regex
\b(?:\d{1,3}\.){3}\d{1,3}\b
```
但更精确的版本：
```regex
\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b
```
---
```bash
# 创建测试文件
cat > test.txt <<EOF
hello world
this is a test line
hello again
1234567890
email@example.com
IP: 192.168.1.1
EOF

# 练习 grep 正则
grep '\d' test.txt        # 匹配含数字的行（可能需要加 -P）
grep -E '[0-9]' test.txt  # 更兼容的方式
grep '^hello' test.txt    # 匹配以 hello 开头的行
grep 'hello$' test.txt    # 匹配以 hello 结尾的行
```
---
1. **在线正则测试器**：
   - [https://regex101.com](https://regex101.com)
   - [https://rubular.com](https://rubular.com)
---
## 💡 七、小贴士
- 在 Linux 中，不同命令对正则的支持略有不同：
  - `grep` 默认只支持基本正则（Basic RE），要启用扩展正则要用 `-E`
  - `egrep` 等价于 `grep -E`
  - Perl 兼容正则（PCRE）可用 `grep -P`
- 要记得对特殊字符进行转义，比如 `.`、`*`、`?`、`(`、`)`、`[`、`]`、`\` 等
